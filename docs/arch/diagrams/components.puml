@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_WITH_LEGEND()

Person(user, "Player", "Interacts with the game using camera input")

System_Boundary(c1, "Pose System") {
    Container(controller, "Pose Controller", "Python/C++", "Detects poses (MediaPipe), serializes via FlatBuffers, and streams binary frames over WebSocket")
    Container(game, "Game Client (Bevy)", "Rust", "WebSocket client, deserializes FlatBuffers, matches live pose against prerecorded choreography, and visualizes poses and score with Bevy")
    Container(browserVariant, "Browser-Only Client", "JavaScript/WASM", "Runs MediaPipe JS for in-browser inference, deserializes FlatBuffers, and visualizes via Bevy WASM")
    Container(contentRecorder, "Content Recorder", "Rust", "Captures and stores prerecorded choreography using FlatBuffers")
}

Rel(user, controller, "Streams raw video to")
Rel(controller, game, "Streams FlatBuffers over WebSocket")
Rel(contentRecorder, game, "Provides prerecorded choreography to")
Rel(contentRecorder, browserVariant, "Provides prerecorded choreography to")
@enduml

